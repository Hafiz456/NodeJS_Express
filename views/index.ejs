<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
    crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" 
    crossorigin="anonymous"></script>
    <title>Budget App</title>
  </head>
  <body>
    <div class="container" > 
        <div class="row m-4" >
            <h3 class="form-label fw-light ">BUDGET APP</h3>
            <div class="col-5 border-2 border border-success rounded ">
                <div class="mb-1.5 p-3">
                    <form method="post" action="/budget/calculate" >
                        <div class="mb-2 ">
                        <label for="budgetlabel" class="form-label fw-light">Please Enter Your Budget</label>
                        <input required type="number    " class="form-control border-1 border border-success rounded" id="budget" name="budget" required >
                        </div>
                        <button type="submit" class="btn btn-outline-success">Calculate</button>
                    </form>
                </div>
            </div>
            <div class="col-7 ">
                <div class="row ">
                    <div class="col-2" >
                        <h6>BUDGET</h6>
                        <span class="material-icons" style="font-size:60px;color:rgb(6,102,150); font-weight:bold;">
                            local_atm
                            </span>
                            <h6 style="font-size:25px;color:#42896B; font-weight:bold;" id="budget"><%= `${bug}`  %></h6>
                    </div>
                    <div class="col-2">
                        
                        <h6>EXPENSES</h6>
                        <span class="material-icons" style="font-size:60px;color:rgb(6,102,150); font-weight:bold;">
                            payment
                            </span>
                            <h6 style="font-size:25px;color:#98231A; font-weight:bold;" id="expenses"><%= `${exp}`  %></h6>
                    </div>
                    <div class="col-2">
                        <h6>BALANCE</h6>
                        <span class="material-icons" style="font-size:60px;color:rgb(6,102,150); font-weight:bold;">
                            attach_money
                            </span>
                            <h6 style="font-size:25px;color:#42896B; font-weight:bold;" id=""><%= `${bal}`  %></h6>
                    </div>
                </div>
                
            </div>
        </div>
        <div class="row m-4">
            <div class="col-sm-5 border-2 border border-danger rounded ">
                <div class="mb-1.5 p-3">
                    <form method="post" action="/expense/add" >
                        <div class="mb-2 ">
                            <label for="expenselabel" class="form-label fw-light" >Please Enter Your Expense</label>
                            <input required type="text" class="form-control border-1 border border-danger rounded" id="budget" name="expenseTitle" >
                        </div>
                        <div class="mb-2">
                            <label for="expenselabel" class="form-label fw-light" >Please Enter Expense Amount</label>
                            <input required type="number" class="form-control border-1 border border-danger rounded" id="budget" name="value">
                         </div>
                         <% if(showLowBalancePrompt=="low") {%> 
                         <script>                        
                                alert("Low balance");
                        </script>
                        <% } %> 
                        <button type="submit" class="btn btn-outline-danger">Add Expense</button>
                    </form>
                </div>
            </div>
                    <div class="col-sm-2"  >
                        <h5>Expense/Title</h5>
                        <% arr.map((a,k)=>{ %>
                             <p style="color:#98231A; "><%=`${a.expenseTitle}`%></p>
                        <%})%>
                    </div>
                    <div class="col-sm-2" >
                        <h5>Expense/Value</p>
                        <% arr.map((a,k)=>{ %>
                            <p style="color:#98231A; "><%=`${a.value}`%></p>
                       <%})%>
                    </div>
                    <% if(global.EditKey!="") { %>

                        <script>
                          let title = prompt("Enter your expense");
                          let amount = prompt("Enter your expense amount");
                
                          window.location.href = "/edit/" + title + "/" + amount;
                        </script>
                
                        <%} %>
                    <div class="col-sm-2"  >
                        <h5>Edit/Delete</h5>
                        <% arr.map((a,k)=>{ %>
                           <div style="font-size: 20px" class="m-2"> 
                                <a href="/show/ <%= k %> ">
                                    <span class="material-icons" style="font-size:20px;color:rgb(6,102,150); font-weight:bold;">
                                    border_color
                                    </span>
                                </a>
                               <a href="/delete/ <%= k %>">
                                    <span class="material-icons" >delete</span>
                                </a>
                            </div>
                        <%})%>
                  </div>
        </div>
       
    </div>
    
    
  </body>
</html>